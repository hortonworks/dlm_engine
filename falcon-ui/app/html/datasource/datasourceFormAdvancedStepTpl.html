<!--
/**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
-->
<form name="datasourceForm" novalidate id="datasourceFormGeneralStep">
	<div class="col-xs-24">
		<div class="col-xs-12 plr0px">
			<div class="col-xs-24 plr0px">
				<label class="light" tooltip="cluster.colo">Data Center or Colo Name<mandatory-field></mandatory-field></label>
				<input type="text" class="form-control"
							ng-pattern="validations.patterns.name"
							ng-required="true" ng-disabled="xmlPreview.edit"
							ng-model="datasource.colo" validation-message="{{validations.messages.colo}}"/>
			</div>
		</div>
	</div>

	<div class="col-xs-24">
		<label class="light">Tags</label>
	</div>

	<div class="col-xs-12">
		<div ng-repeat="tag in datasource.tags">
			<div class="row dynamic-table-spacer">
				<div class="col-xs-8">
					<input type="text" class="form-control" ng-model="tag.key"
						validation-optional-message="{{validations.messages.key}}"
							ng-pattern="validations.patterns.alpha" ng-required="tag.value" placeholder="key"/>
				</div>
				<div class="col-xs-8">
					<input type="text" class="form-control" validation-optional-message="{{validations.messages.value}}"
							ng-model="tag.value"
							ng-pattern="validations.patterns.alpha" ng-required="tag.key" placeholder="value"/>
				</div>
				<div class="col-xs-8">
					<button type="button" class="btn btn-default btn-xs" ng-click="removeTag($index)" ng-disabled="xmlPreview.edit" ng-if="!$first || !$last">
						<span class="entypo minus"></span> delete
					</button>
					<button type="button" class="btn btn-default btn-xs" ng-click="addTag()" ng-disabled="xmlPreview.edit" ng-if="$last">
						<span class="entypo plus"></span> add tag
					</button>
				</div>
			</div>
		</div>
	</div>


	<div class="col-xs-24">
		<div class="col-xs-12 plr0px">
			<label class="light" tooltip="datasource.overrideMapReduceHome">Override MapReduce Home</label>
			<div class="form-inline">
				<input type="text" class="form-control" ng-disabled="xmlPreview.edit"
		        ng-model="((datasource.properties | filter:{name:'overrideMapReduceHome'})[0]).value"
						validation-optional-message="{{validations.messages.overrideMapReduceHome}}"/>
				<!-- <button type="button" class="btn btn-sharp btn-browse" ng-disabled="xmlPreview.edit" ng-click="">
		      <i>Browse</i>
		    </button> -->
			</div>
			<!-- <div class="form-inline pull-right">
				<label class="light" tooltip="datasource.overrideMapReduceHome">Override MapReduce Home</label>
				<input type="text" class="form-control" ng-disabled="xmlPreview.edit"
		        ng-model="datasource.overrideMapReduceHome"
						validation-optional-message="{{validations.messages.overrideMapReduceHome}}"/>
				<button type="button" class="btn btn-sharp btn-browse" ng-disabled="xmlPreview.edit" ng-click="">
		      <i>Browse</i>
		    </button>
				<label class="light"></label>
			</div> -->
		</div>
	</div>

	<div class="col-xs-24">
		<input type="checkbox" class="ml0"
			ng-model="((datasource.properties | filter:{name:'directMode'})[0]).value"
			ng-disabled="xmlPreview.edit" />
		<label class="light" tooltip="datasource.directMode">Direct</label>
		<input type="checkbox"
			ng-model="((datasource.properties | filter:{name:'verboseMode'})[0]).value"
			ng-disabled="xmlPreview.edit" />
		<label class="light" tooltip="datasource.verboseMode">Verbose</label>
	</div>

	<div class="col-xs-12 plr0px">
		<div class="col-xs-24">
			<label class="light" tooltip="datasource.interfaces.credentialType">Credential Type</label>
		</div>
		<div class="col-xs-24">
			<input type="radio" ng-model="datasource.interfaces.interfaces[0].credential.type" value="password-text" class="ml0" />
			<label class="light" tooltip="datasource.interfaces.credentialType">Username / Password</label>
			<input type="radio" ng-model="datasource.interfaces.interfaces[0].credential.type" value="password-file"/>
			<label class="light" tooltip="datasource.interfaces.credentialType">Password File</label>
			<input type="radio" ng-model="datasource.interfaces.interfaces[0].credential.type" value="password-alias"/>
			<label class="light" tooltip="datasource.interfaces.credentialType">Password Alias</label>
		</div>

		<div class="col-xs-10" ng-if="datasource.interfaces.interfaces[0].credential.type == 'password-text'">
	    <label class="light" tooltip="datasource.userName">Username</label>
	    <input type="text" class="form-control" ng-model="datasource.interfaces.interfaces[0].credential.userName"
				validation-optional-message="{{validations.messages.userName}}"
	      ng-pattern="validations.patterns.userName"
			/>
	  </div>
		<div class="col-xs-10" ng-if="datasource.interfaces.interfaces[0].credential.type == 'password-text'">
	    <label class="light" tooltip="datasource.password">Password</label>
	    <input type="text" class="form-control" ng-model="datasource.interfaces.interfaces[0].credential.passwordText"
				validation-optional-message="{{validations.messages.dbPassword}}"
	      ng-pattern="validations.patterns.password"
	     />
	  </div>
		<div class="col-xs-10" ng-if="datasource.interfaces.interfaces[0].credential.type == 'password-file'">
	    <label class="light" tooltip="datasource.password">Password File</label>
	    <input type="text" class="form-control" ng-model="datasource.interfaces.interfaces[0].credential.passwordFile"
				validation-optional-message="{{validations.messages.passwordFile}}"
	      ng-pattern="validations.patterns.password"
	     />
	  </div>
		<div class="col-xs-10" ng-if="datasource.interfaces.interfaces[0].credential.type == 'password-alias'">
	    <label class="light" tooltip="datasource.password">Password Alias</label>
	    <input type="text" class="form-control" ng-model="datasource.interfaces.interfaces[0].credential.passwordAlias"
				validation-optional-message="{{validations.messages.passwordAlias}}"
	      ng-pattern="validations.patterns.password"
	     />
	  </div>
  </div>

	<div class="col-xs-24"><label>Access Control List</label></div>
	<div class="col-xs-24 plr0px">
		<div class="col-xs-8">
			<label class="light">Owner<mandatory-field></mandatory-field></label>
			<input type="text" class="form-control" validation-message="{{validations.messages.acl.owner}}"
						 ng-required="true"
						 ng-pattern="validations.patterns.unixId"
						 ng-model="datasource.ACL.owner"/>
		</div>
		<div class="col-xs-8">
			<label class="light">Group<mandatory-field></mandatory-field></label>
			<input type="text" class="form-control" validation-message="{{validations.messages.acl.group}}"
						 ng-required="true"
						 ng-pattern="validations.patterns.unixId"
						 ng-model="datasource.ACL.group"/>
		</div>
		<div class="col-xs-24">
			<div class="col-xs-8 plr0px">
				<label class="light">Permissions<mandatory-field></mandatory-field></label>
				<acl-permissions acl-model="datasource.ACL.permission"></acl-permissions>
			</div>
		</div>
		</div>

		<div class="col-xs-24">
			<div class="pull-right">
				<button id="datasource.step2" class="btn btn-datasource"
		         ng-disabled="buttonSpinners.validateShow"
		         ng-click="validate()">
		      Test <img src="css/img/ajax-loader.gif" ng-if="buttonSpinners.validateShow" />
		    </button>
			</div>
	  </div>

  <div class="col-xs-24 pb15px mt35">
		<button id="datasource.backToStep1" class="btn prevBtn" type="button" ng-click="goBack()" ng-disabled="buttonSpinners.backShow">
			PREVIOUS <img src="css/img/ajax-loader.gif" ng-if="buttonSpinners.backShow">
		</button>
		<div class="pull-right">
	    <a class="btn cnclBtn" ui-sref="main">
	      CANCEL
	    </a>
	    <button id="datasource.step1" class="btn nextBtn"
	         ng-disabled="buttonSpinners.show"
	         ng-click="goNext(datasourceForm.$invalid)"
					 scroll-to-error>
	      NEXT <img src="css/img/ajax-loader.gif" ng-if="buttonSpinners.show" />
	    </button>
		</div>
  </div>

</form>
