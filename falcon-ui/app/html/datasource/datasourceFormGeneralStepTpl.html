<!--
/**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
-->
<form name="datasourceForm" novalidate id="datasourceFormGeneralStep">
	<div class="col-xs-24">
		<div class="col-xs-12 plr0px">
			<div class="col-xs-12">
				<label class="light" tooltip="datasource.name">Connection Name<mandatory-field></mandatory-field></label>
	    	<input type="text" class="form-control" ng-disabled="editingMode" ng-keydown="validations.acceptNoSpaces($event)"
	           check-name="{type:'datasource', check:!editingMode}" ng-class="{fakeInvalid:!validations.nameAvailable}"
	           ng-model="datasource.name" ng-required="true" ng-pattern="validations.patterns.name"/>
			</div>
			<div class="col-xs-12">
				<label class="light">Database Manager<mandatory-field></mandatory-field></label>
	    	<select class="form-control padding0 " ng-model="datasource.type" ng-change="getDatabaseDefaultDetails()">
					<option value="" disabled selected style='display:none;'>- Select Database Manager -</option>
					<option value="sqlserver">SQL Server</option>
					<option value="teradata">Terdadata</option>
					<option value="mysql">MySQL</option>
					<option value="postgresql">PostgreSQL</option>
					<option value="oracle">Oracle</option>
					<option value="db2">DB2</option>
						<!-- <option ng-repeat="driverItem in driverList">{{driverItem.name}}</option> -->
				</select>
			</div>
		</div>
		<div class="col-xs-12">
				<label>Connection String</label>
						<input type="text" class="form-control" ng-model="datasource.interfaces.interfaces[0].endpoint" />
						<!-- <span>jdbc:sqlserver//localhost:80</span> -->
		</div>
	</div>

	<div class="col-xs-12">
		<div class="col-xs-24">
			<label class="light">Description</label>
			<input type="text" class="form-control"
					ng-disabled="xmlPreview.edit"
					ng-pattern="validations.patterns.freeText"
					ng-model="datasource.description" />
		</div>
	</div>
	<div class="col-xs-12 plr0px">
		<div class="col-xs-24">
			<label class="light">Interface</label>
		</div>
		<div class="col-xs-24">
			<input type="radio" ng-model="datasource.interfaces.interfaces[0].type" value="readonly" class="ml0" />
			<label class="light mt5" tooltip="datasource.readMode">Read</label>
			<input type="radio" ng-model="datasource.interfaces.interfaces[0].type" value="write"/>
			<label class="light mt5" tooltip="datasource.writeMode">Write</label>
		</div>
	</div>

	<div class="col-xs-24">
		<div class="col-xs-12">
			<label class="light" tooltip="datasource.driver">Driver</label>
			<!-- <input type="text" class="form-control" ng-model="datasource.driver"
				validation-optional-message="{{validations.messages.driver}}"
				ng-pattern="validations.patterns.driver"
			/> -->
			<input type="text" class="form-control" ng-model="datasource.driver.jar"
				validation-optional-message="{{validations.messages.driver}}"
	      ng-pattern="validations.patterns.driver"
	    />
	  </div>
		<div class="col-xs-12">
			<label class="light" tooltip="datasource.parameterFile">Parameter File</label>
			<div class="form-inline">
				<input type="text" class="form-control" ng-disabled="xmlPreview.edit"
		        ng-model="((datasource.properties | filter:{name:'parameterFile'})[0]).value"
						validation-optional-message="{{validations.messages.parameterFile}}"/>
				<!-- <button type="button" class="btn btn-sharp btn-browse" ng-disabled="xmlPreview.edit" ng-click="">
					<i>Browse</i>
				</button> -->
				<!-- <a href="" class="datasource-link" ng-click="addParameter()" ng-disabled="xmlPreview.edit">+ Add Parameters</a> -->
				<!-- <div class="pull-right">
					<label class="light" tooltip="datasource.parameters">Parameters</label>
					<a href="" class="datasource-link">+ Add Parameters</a>
			</div>
		</div> -->
			<!-- <div class="form-inline pull-right">
				<label class="light" tooltip="datasource.parameterFile">Parameter File</label>
				<input type="text" class="form-control" ng-disabled="xmlPreview.edit"
		        ng-model="datasource.parameterFile"
						validation-optional-message="{{validations.messages.parameterFile}}"/>
				<button type="button" class="btn btn-sharp btn-browse" ng-disabled="xmlPreview.edit" ng-click="">
					<i>Browse</i>
				</button>
			</div> -->
			</div>
		</div>
	</div>

	<div class="col-xs-12">
		<div class="col-xs-24">
	    <label class="light" tooltip="datasource.database">Database</label>
	    <input type="text" class="form-control" ng-model="datasource.databaseName"
				validation-optional-message="{{validations.messages.database}}"
	      ng-pattern="validations.patterns.database"
	    />
	  </div>
		<div class="col-xs-16">
	    <label class="light" tooltip="datasource.host">Host</label>
	    <input type="text" class="form-control" ng-model="datasource.host"
				validation-optional-message="{{validations.messages.host}}"
	      ng-pattern="validations.patterns.host"
			/>
	  </div>
		<div class="col-xs-8">
	    <label class="light" tooltip="datasource.port">Port</label>
	    <input type="text" class="form-control" ng-model="datasource.port"
				validation-optional-message="{{validations.messages.port}}"
	      ng-pattern="validations.patterns.port"
	    />
	  </div>

		<div class="col-xs-24 plr0px">
			<div class="col-xs-24">
				<label class="light" tooltip="datasource.interfaces.credentialType">Credential Type</label>
			</div>
			<div class="col-xs-24">
				<input type="radio" ng-model="datasource.interfaces.credential.type" value="password-text" class="ml0" />
				<label class="light" tooltip="datasource.interfaces.credentialType">Username / Password</label>
				<input type="radio" ng-model="datasource.interfaces.credential.type" value="password-file"/>
				<label class="light" tooltip="datasource.interfaces.credentialType">Password File</label>
				<input type="radio" ng-model="datasource.interfaces.credential.type" value="password-alias"/>
				<label class="light" tooltip="datasource.interfaces.credentialType">Password Alias</label>
			</div>

			<div class="col-xs-10" ng-if="datasource.interfaces.credential.type == 'password-text'">
				<label class="light" tooltip="datasource.userName">Username</label>
				<input type="text" class="form-control" ng-model="datasource.interfaces.credential.userName"
					validation-optional-message="{{validations.messages.userName}}"
					ng-pattern="validations.patterns.userName"
				/>
			</div>
			<div class="col-xs-10" ng-if="datasource.interfaces.credential.type == 'password-text'">
				<label class="light" tooltip="datasource.password">Password</label>
				<input type="text" class="form-control" ng-model="datasource.interfaces.credential.passwordText"
					validation-optional-message="{{validations.messages.dbPassword}}"
					ng-pattern="validations.patterns.password"
				 />
			</div>
			<div class="col-xs-10" ng-if="datasource.interfaces.credential.type == 'password-file'">
				<label class="light" tooltip="datasource.password">Password File</label>
				<input type="text" class="form-control" ng-model="datasource.interfaces.credential.passwordFile"
					validation-optional-message="{{validations.messages.passwordFile}}"
					ng-pattern="validations.patterns.password"
				 />
			</div>
			<div class="col-xs-10" ng-if="datasource.interfaces.credential.type == 'password-alias'">
				<label class="light" tooltip="datasource.password">Password Alias</label>
				<input type="text" class="form-control" ng-model="datasource.interfaces.credential.passwordAlias"
					validation-optional-message="{{validations.messages.passwordAlias}}"
					ng-pattern="validations.patterns.password"
				 />
			</div>
		</div>
	</div>


	<div class="col-xs-12 plr0px">
		<div class="row m0" ng-if="datasource.parameters.length > 0">
			<label class="col-xs-8">Parameter Name</label><label class="col-xs-16">Value</label>
		</div>
 		<div ng-repeat="parameter in datasource.parameters" class="row m0" ng-if="datasource.parameters.length > 0">
				<div class="col-xs-8 dynamic-table-spacer">
					<input type="text" class="form-control" ng-model="parameter.name"
								 ng-pattern="validations.patterns.propertyName"
								 validation-optional-message="{{validations.messages.name}}"
								 ng-disabled="xmlPreview.edit"
								 ng-required="parameter.value" placeholder="name" />
				</div>
				<div class="col-xs-8 dynamic-table-spacer">
					<input type="text" class="form-control" ng-model="parameter.value"
								 validation-optional-message="{{validations.messages.value}}"
								 ng-disabled="xmlPreview.edit"
								 ng-required="parameter.name" placeholder="value" />
				</div>
				<div class="dynamic-table-spacer">
					<button type="button" class="btn btn-default btn-xs" ng-click="removeParameter($index)"
							 ng-disabled="xmlPreview.edit">
						<span class="entypo minus"></span> delete
					</button>
				</div>
		</div>
		<!-- <div class="pull-right">
			<label class="light" tooltip="datasource.properties">Properties</label>
			<a href="" class="datasource-link">+ Add Properties</a>
		</div> -->
		<label class="light col-xs-24" tooltip="datasource.properties">Properties</label>
		<div class="col-xs-24">
			<a href="" class="datasource-link" ng-click="addProperty()" ng-disabled="xmlPreview.edit">+ Add Properties</a>
		</div>
		<div class="row m0" ng-if="datasource.customProperties.length > 0">
			<label class="col-xs-8">Property Name</label><label class="col-xs-16">Value</label>
		</div>
		<div ng-repeat="property in datasource.customProperties" class="row m0"  ng-if="datasource.customProperties.length > 0">
				<div class="col-xs-8 dynamic-table-spacer">
					<input type="text" class="form-control" ng-model="property.name"
								 ng-pattern="validations.patterns.propertyName"
								 validation-optional-message="{{validations.messages.name}}"
								 ng-disabled="xmlPreview.edit"
								 ng-required="property.value" placeholder="name" />
				</div>
				<div class="col-xs-8 dynamic-table-spacer">
					<input type="text" class="form-control" ng-model="property.value"
								 validation-optional-message="{{validations.messages.value}}"
								 ng-disabled="xmlPreview.edit"
								 ng-required="property.name" placeholder="value" />
				</div>
				<div class="dynamic-table-spacer">
					<button type="button" class="btn btn-default btn-xs" ng-click="removeProperty($index)"
							 ng-disabled="xmlPreview.edit">
						<span class="entypo minus"></span> delete
					</button>
				</div>
		</div>
	</div>

  <div class="col-xs-24 pb15px mt35">
		<div class="pull-right">
	    <a class="btn cnclBtn" ui-sref="main">
	      CANCEL
	    </a>
	    <button id="datasource.step1" class="btn nextBtn"
	         ng-disabled="buttonSpinners.show"
	         ng-click="goNext(datasourceForm.$invalid)"
					 scroll-to-error>
	      NEXT <img src="css/img/ajax-loader.gif" ng-if="buttonSpinners.show" />
	    </button>
		</div>
  </div>

</form>
